'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var ResizeObserver = require('resize-observer-polyfill');
var react = require('react');

function _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }

var ResizeObserver__default = /*#__PURE__*/_interopDefault(ResizeObserver);

function useMeasure(ref) {
  let [snapshot, setSnapshot] = react.useState(() => ({
    height: 0,
    width: 0
  }));
  react.useLayoutEffect(() => {
    let element = ref.current;

    if (element !== null) {
      let resizeObserver = new ResizeObserver__default['default'](([entry]) => {
        // @ts-ignore
        const height = entry.target.offsetHeight; // @ts-ignore

        const width = entry.target.offsetWidth;

        if (width !== snapshot.width || height !== snapshot.height) {
          setSnapshot({
            width,
            height
          });
        }
      });
      resizeObserver.observe(element);
      return () => {
        resizeObserver.unobserve(element);
      };
    }
  });
  return snapshot;
}

exports.useMeasure = useMeasure;
